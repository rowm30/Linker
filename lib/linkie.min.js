!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("linkie",[],e):"object"==typeof exports?exports.linkie=e():t.linkie=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){t.exports=require("superagent")},function(t,e,r){"use strict";var n=r(2);t.exports={fetch:n}},function(t,e,r){"use strict";function n(t){var e=t("title").text();return e?p(e):""}function o(t){var e=t("meta[name='description']").attr("content");return e?p(e):""}function u(t){for(var e="",r=t("p"),n=0;n<r.length;n+=1)if(e+=t(r[n]).text(),e.length>128)return e;return e}function i(t){var e=t("img");if(e&&e[0]){var r=t(e[0]).attr("src");return r?p(r):""}return""}function a(t){var e=t("meta[name='keywords']").attr("content");return e?e.split(",").map(function(t){return p(t)}).filter(function(t){return""!==t}):[]}function c(t){var e=t("meta[property='og:title']").attr("content");return e?p(e):""}function f(t){var e=t("meta[property='og:description']").attr("content");return e?p(e):""}function s(t){var e=t("meta[property='og:type']").attr("content");return e?p(e):""}function l(t){var e=t("meta[property='og:image']").attr("content");return e?p(e):""}var p=r(3),d=r(4),m=r(0),v=r(5);t.exports=function(t,e,r){var p=r||e,g=e.verifyImage;return t?(m.get(t).redirects(2).timeout({response:3e3,deadline:3e3}).ok(function(t){return t.status<500}).end(function(e,r){if(e)return p({message:"Unable to fetch meta information for "+t,code:e.code,errno:e.errno,status:e.status},null);var m=d.load(r.text),y={url:t,status:r.status,host:r.request.host,title:c(m)||n(m),description:f(m)||o(m)||u(m),type:s(m),keywords:a(m)},x=v.getSite(r.request.host);x&&(y.site=x,y.extra=v.populateSiteRelatedInfo(x,t));var b=l(m)||i(m);return g?(v.verifyImage(b,function(t){return t||(y.image=b),p(null,y)}),null):(y.image=b,p(null,y))}),null):p(null,{})}},function(t,e){t.exports=require("trim")},function(t,e){t.exports=require("cheerio")},function(t,e,r){"use strict";var n=r(6),o=r(7),u=r(0),i={"www.youtube.com":"youtube","github.com":"github"},a=Object.keys(i);t.exports={populateSiteRelatedInfo:function(t,e){var r={};if("youtube"===t){var u=o.parse(n.parse(e).query).v;u&&(r.vid=u)}return r},getSite:function(t){for(var e=0;e<a.length;e+=1){var r=a[e],n=i[r];if(t===r)return n}return null},verifyImage:function(t,e){return t?(u.get(t).redirects(2).timeout({response:3e3,deadline:3e3}).ok(function(t){return 200===t.status}).end(function(t){return e(t?t:null)}),null):e(null)}}},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("querystring")}])});